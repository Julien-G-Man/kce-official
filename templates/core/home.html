{% extends 'base.html' %}
{% load static %}

{% block title %}Welcome | Kingdom Civilization Embassy{% endblock %}

{% block head_extra %}
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block content %}
    <section class="hero">
        <div class="hero-background-image" style="background-image: url('{% static 'img/pstansere.jpg' %}')"></div>
        <div class="container">
            <div class="hero-content fade-in">
                <div class="welcome-badge">
                    <i class="fas fa-heart"></i>
                    <span>Welcome To</span>
                </div>
                <div class="hero-text">
                    <h1>WARRIOR BRIDE WORLDWIDE MINISTRY</h1>
                    <h5>Kingdom Civilization Embassy <br>(KCE)</h5>
                    <h6>We are a Commission dedicated to Raising a Supernatural Army of Young People to Take Captive Their Generation for God</h6>
                </div>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <div class="section-header fade-in">
                <h2>Upcoming Events</h2>
                <p>Join us for these exciting opportunities to grow in faith and fellowship</p>
            </div>
            <div class="grid grid-3 mt-3">
                {% if upcoming_event %}
                <div class="card event-card fade-in">
                    <div class="event-date">
                        <span class="day">{{ upcoming_event.date|date:"d" }}</span>
                        <span class="month">{{ upcoming_event.date|date:"M"|upper }}</span>
                    </div>
                    <h3>{{ upcoming_event.title }}</h3>
                    <p>{{ upcoming_event.description|truncatewords:15 }}</p>
                    <div class="event-location">
                        <i class="fas fa-clock"></i>
                        <span>{{ upcoming_event.date|time:"g:i A" }}</span>
                    </div>
                    <div class="event-location">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>{{ upcoming_event.location }}</span>
                    </div>
                </div>
                {% else %}
                    <p>No upcoming events at the moment. Please check back soon!</p>
                {% endif %}
            </div>
            <div class="text-center mt-3">
                <a href="{% url 'core:events' %}" class="btn btn-primary">
                    <i class="fas fa-calendar-alt"></i>
                    View All Events
                </a>
            </div>
        </div>
    </section>

    <section class="section bg-soft">
        <div class="container">
            <div class="section-header fade-in">
                <h2>Latest Sermons</h2>
                <p>Discover powerful teachings that will transform your spiritual journey</p>
            </div>
            <div class="grid grid-3 mt-3">
                {% if latest_sermon %}
                    <div class="card sermon-card fade-in">
                        {% if latest_sermon.thumbnail %}
                            <img src="{{ latest_sermon.thumbnail.url }}" alt="{{ latest_sermon.title }}" class="sermon-thumbnail">
                        {% else %}
                            <img src="{% static 'img/year_of_dominion.jpg' %}" alt="Default Sermon Thumbnail" class="sermon-thumbnail">
                        {% endif %}
                        <h3>{{ latest_sermon.title }}</h3>
                        {% if latest_sermon.subtitle %}
                            <h6>{{ latest_sermon.subtitle }}</h6>
                        {% endif %}
                        {% if latest_sermon.series %}
                            <div class="sermon-meta">
                                <span><i class="fas fa-microphone"></i> {{ latest_sermon.series }}</span>
                            </div>
                        {% endif %}
                        <div class="sermon-meta">
                            <span><i class="fas fa-calendar"></i> {{ latest_sermon.date|date:"F j, Y" }}</span>
                        </div>
                        <a href="{{ latest_sermon.video_url }}" target="_blank" class="btn btn-primary">
                            <i class="fas fa-play"></i> Watch Now
                        </a>
                    </div>
                {% else %}
                    <p>No sermons available at the moment. Please check back soon!</p>
                {% endif %}
            </div>
            <div class="text-center mt-3">
                <a href="{% url 'core:sermons' %}" class="btn btn-soft">
                    <i class="fas fa-video"></i>
                    View All Sermons
                </a>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <div class="section-header fade-in">
                <h2>Words of Wisdom</h2>
                <p>Be inspired by powerful teachings from our spiritual leader</p>
            </div>
            {% if random_quote %}
                <div class="quote-card fade-in">
                    <p class="quote-text">"{{ random_quote.text }}"</p>
                    <div class="quote-meta">
                        {% if random_quote.reference %}
                            <div class="quote-reference">{{ random_quote.reference }}</div>
                        {% endif %}
                        {% if random_quote.sermon_source %}
                            <p><i class="fas fa-quote-left"></i> From the sermon '{{ random_quote.sermon_source.title }}'</p>
                        {% endif %}
                        <div class="quote-author">{{ random_quote.author }}</div>
                    </div>
                </div>
            {% else %}
                <p>No quotes available at the moment. Please check back soon!</p>
            {% endif %}
            <div class="text-center mt-3">
                <a href="{% url 'core:quotes' %}" class="btn btn-soft">
                    <i class="fas fa-heart"></i>
                    View More Quotes
                </a>
            </div>
        </div>
    </section>

   <section class="section subscription-section">
      <div class="container">
         <div class="subscription-content fade-in">
            <h2 class="text-center">Stay Connected With Our Family</h2>
               <p class="text-center">Join our community and receive updates about our upcoming events, sermons, and spiritual growth opportunities</p>
                
               <div class="form-success" style="display: none;">
                  <i class="fas fa-check-circle"></i>
                  <p>Welcome to KCE! You'll receive updates about our events and sermons.</p>
               </div>

               <div class="form-error" style="display: none;">
                  <i class="fas fa-exclamation-circle"></i>
                  <p>There was an error processing your subscription. Please try again.</p>
               </div>

               <form id="subscriptionForm" class="subscription-form" method="post" action="{% url 'members:subscribe' %}">
                  {% csrf_token %}
                  <div class="form-group">
                     <label for="subscriberName">
                        <i class="fas fa-user"></i> Full Name
                     </label>
                     <input type="text" id="subscriberName" name="name" class="form-control" placeholder="Enter your full name" required>
                  </div>

                  <div class="form-group">
                     <label for="whatsapp">
                        <i class="fab fa-whatsapp"></i> WhatsApp Number
                     </label>
                     <input type="tel" id="whatsapp" name="whatsapp" class="form-control" placeholder="e.g., +233 54 630 4940" required>
                  </div>

                  <div class="form-group">
                     <label for="subscriberEmail">
                        <i class="fas fa-envelope"></i> Email Address
                     </label>
                     <input type="email" id="subscriberEmail" name="email" class="form-control" placeholder="Enter your email address" required>
                  </div>

                  <button type="submit" class="btn btn-primary">
                     <i class="fas fa-paper-plane"></i> Join Our Family
                  </button>
               </form>
         </div>
      </div>
   </section>

   <section class="section cta-section">
      <div class="container">
         <div class="cta-content fade-in">
            <h2>Join Our Growing Community</h2>
            <p>Be part of a vibrant family of believers growing in faith, love, and purpose together.</p>
            <div class="cta-buttons">
                  <a href="{% url 'core:contact' %}" class="btn">
                     <i class="fas fa-comments"></i>
                     Let's Connect
                  </a>
                  <a href="{% url 'core:give' %}" class="btn btn-primary">
                     <i class="fas fa-heart"></i>
                     Support Our Ministry
                  </a>
            </div>
         </div>
      </div>
   </section>
{% endblock %}

{% block scripts_extra %}
   <script src="{% static 'js/home.js' %}"></script>
{% endblock %}